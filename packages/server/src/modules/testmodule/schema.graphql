# Zver
type Zver {
  id: Int!
  inv: String!
  isWork: Boolean!
  created_at: String
  updated_at: String
  blocks: [Block]
  comments: [Comments]
}

# Block
type Block {
  id: Int!
  inv: String!
  isWork: Boolean!
  created_at: String
  updated_at: String
  modules: [Module]
  comments: [Comments]
}

# Module
type Module {
  id: Int!
  inv: String!
  isWork: Boolean!
  created_at: String
  updated_at: String
  comments: [Comments]
}

# Comments
type Comments {
  id: Int!
  content: String!
  created_at: String
  updated_at: String
}

# Edges for Zvers
type ZverEdges {
  node: Zver
  cursor: Int
}

# PageInfo for Zvers
type ZverPageInfo {
  endCursor: Int
  hasNextPage: Boolean
}

# Zvers relay-style pagination query
type Zvers {
  totalCount: Int
  edges: [ZverEdges]
  pageInfo: ZverPageInfo
}

extend type Query {
  # Zvers pagination query
  zvers(limit: Int, after: Int): Zvers
  # Zver
  zver(id: Int!): Zver
  # Block
  block(id: Int!): Block
  # Module
  module(id: Int!): Module
  # Comments
  comments(id: Int!): Comments
}

extend type Mutation {
  # Create new zver
  addZver(input: AddZverInput!): Zver
  # Delete a zver
  deleteZver(id: Int!): Zver
  # Edit a zver
  editZver(input: EditZverInput!): Zver
  # Add block to zver
  addBlock(input: AddBlockInput!): Block
  # Delete a block
  deleteBlock(input: DeleteBlockInput!): Block
  # Edit a block
  editBlock(input: EditBlockInput!): Block
  # Add module to block
  addModule(input: AddModuleInput!): Module
  # Delete a module
  deleteModule(input: DeleteModuleInput!): Module
  # Edit a module
  editModule(input: EditModuleInput!): Module
  # Add comments to zver
  addCommentsOnZver(input: AddCommentsOnZverInput!): Comments
  # Add comments to block
  addCommentsOnBlock(input: AddCommentsOnBlockInput!): Comments
  # Add comments to module
  addCommentsOnModule(input: AddCommentsOnModuleInput!): Comments
  # Delete a comments
  deleteComments(input: DeleteCommentsInput!): Comments
  # Edit a comments
  editComments(input: EditCommentsInput!): Comments
}

# Input for addZver Mutation
input AddZverInput {
  inv: String!
  isWork: Boolean!
}

# Input for editZver Mutation
input EditZverInput {
  id: Int!
  inv: String!
  isWork: Boolean!
}

# Input for addBlock Mutation
input AddBlockInput {
  inv: String!
  isWork: Boolean!
  # Needed for blockUpdated Subscription filter
  zverId: Int!
}

# Input for editBlock Mutation
input DeleteBlockInput {
  id: Int!
  # Needed for blockUpdated Subscription filter
  zverId: Int!
}

# Input for deleteBlock Mutation
input EditBlockInput {
  id: Int!
  inv: String!
  isWork: Boolean!
  # Needed for blockUpdated Subscription filter
  zverId: Int!
}

# Input for addModule Mutation
input AddModuleInput {
  inv: String!
  isWork: Boolean!
  # Needed for moduleUpdated Subscription filter
  blockId: Int!
}

# Input for editModule Mutation
input DeleteModuleInput {
  id: Int!
  # Needed for moduleUpdated Subscription filter
  blockId: Int!
}

# Input for deleteModule Mutation
input EditModuleInput {
  id: Int!
  inv: String!
  isWork: Boolean!
  # Needed for moduleUpdated Subscription filter
  blockId: Int!
}

# Input for addCommentsOnZver Mutation
input AddCommentsOnZverInput {
  content: String!
  # Needed for moduleUpdated Subscription filter
  zverId: Int
}

# Input for AddCommentsOnBlock Mutation
input AddCommentsOnBlockInput {
  content: String!
  # Needed for moduleUpdated Subscription filter
  blockId: Int
}

# Input for AddCommentsOnModule Mutation
input AddCommentsOnModuleInput {
  content: String!
  # Needed for moduleUpdated Subscription filter
  moduleId: Int
}

# Input for editComments Mutation
input DeleteCommentsInput {
  id: Int!
  # Needed for moduleUpdated Subscription filter
  zverId: Int
  blockId: Int
  moduleId: Int
}

# Input for deleteComments Mutation
input EditCommentsInput {
  id: Int!
  content: String!
  # Needed for moduleUpdated Subscription filter
  zverId: Int
  blockId: Int
  moduleId: Int
}

extend type Subscription {
  # Subscription for when editing a zver
  zverUpdated(id: Int!): UpdateZverPayload
  # Subscription for zver list
  zversUpdated(endCursor: Int!): UpdateZverPayload
  # Subscription for blocks
  blockUpdated(zverId: Int!): UpdateBlockPayload
}

# Payload for zversUpdated Subscription
type UpdateZverPayload {
  mutation: String!
  id: Int!
  node: Zver
}

# Payload for blockUpdated Subscription
type UpdateBlockPayload {
  mutation: String!
  id: Int
  zverId: Int!
  node: Block
}
